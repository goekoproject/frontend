@defer (when project()) {
  <h1 class="text-2xl font-bold">{{ project()?.name }}</h1>
  <p>{{ 'alertSelectedProduct' | translate }}</p>

  <!-- CATEGORY -->
  <div class="relative flex h-auto flex-col items-center">
    <goeko-category
      [categories]="groupingForm() || []"
      (onSelectCategory)="selectCategory($event)"
      [indexSelected]="indexCategorySelected()">
      <span dataExtra> (10) </span>
    </goeko-category>

    @for (category of groupingForm(); track category.id) {
      <section class="w-full overflow-hidden rounded-lg">
        @if (categorySelected()?.code === category.code) {
          @for (subCategory of category.subcategories; track subCategory.code) {
            <goeko-select-subcategory-product
              [id]="subCategory.code"
              [subCategory]="subCategory"
              [typeTitle]="'question'"
              [multiple]="true">
              <p title>{{ subCategory.question }}</p>
              <go-badge-group [id]="subCategory.code">
                @for (product of subCategory.products; track product.code) {
                  @if (!product.disabled) {
                    <go-badge [value]="product">{{ product.label }}</go-badge>
                  }
                }
              </go-badge-group>
            </goeko-select-subcategory-product>
          }
        }
      </section>
    }
  </div>

  <div class="my-4 flex items-center justify-between">
    @if (indexCategorySelected() > 0) {
      <button go-button appearance="white" (click)="prevCategory()">{{ 'back' | translate }}</button>
    }

    @if (indexCategorySelected() < (groupingForm()?.length ?? 0) - 1) {
      <button class="ml-auto" go-button (click)="nextCategory()">{{ 'next' | translate }}</button>
    } @else {
      <button class="ml-auto" go-button (click)="nextCategory()">{{ 'search' | translate }}</button>
    }
  </div>
} @placeholder {
  <div>loading...</div>
}
