@defer (when projects()) {
  <goeko-go-table [dataSources]="projects()">
    <button go-button header-action (click)="newProject()">
      {{ 'new_project' | translate }}
    </button>
    <ng-template goCellRef let-element>
      {{ element['name'] }}
    </ng-template>

    <ng-template goCellRef let-element>
      <div class="flex max-w-40 gap-1">
        <p>{{ element['locations'][0]?.country?.label }}</p>
        <abbr class="truncate no-underline font-normal" title="{{ element['locations'][0]?.country.regions | displayRegions }}">{{
          element['locations'][0]?.country.regions | displayRegions
        }}</abbr>
      </div>
    </ng-template>

    <ng-template goCellRef let-element>
      {{ element['date'] | goDateFormat }}
    </ng-template>

    <ng-template goCellRef let-element>
      <div class="flex flex-wrap gap-2 p-2">
        @for (category of element['classifications'] | splitCategories; track category) {
          <span class="text-greenLime bg-greenPastel rounded-full px-3 py-1.5 text-sm font-semibold"> {{ category }}</span>
        }
      </div>
    </ng-template>

    <ng-template goElementAction let-element>
      <div class="ml-auto mr-4 flex items-center justify-end gap-4 [&>i]:cursor-pointer [&>i]:text-2xl">
        <i class="ti ti-trash" (click)="deleteProject(element)"></i>

        <!--      @if (element?.notification?.onNewEcosolution) {
          <i class="ti ti-bell-filled" (click)="updateRecivedNotification(element)"></i>
        } @else {
          <i class="ti ti-bell" (click)="updateRecivedNotification(element)"></i>
        } -->

        <i class="ti ti-pencil-minus" (click)="goToEdit(element)"></i>

        <i class="ti ti-chevron-right" (click)="goToDetail(element)"></i>
      </div>
    </ng-template>

    <ng-template [goHeaderRef]="displayColumns"> </ng-template>
  </goeko-go-table>
}
