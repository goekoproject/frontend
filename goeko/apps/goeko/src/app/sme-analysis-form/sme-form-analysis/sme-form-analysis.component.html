<div class="analysis-wrapper" [formGroup]="form">
	<section class="section-step">
		<ng-container *ngFor="let element of formField; let index = index">
			<goeko-category
				id="{{ index }}"
				[selected]="index === slideSelected"
				(click)="addFormGroup(index)"
				[icon]="'assets/category/' + element.icon + '.svg'"
			>
				<p title>{{ element.keyLang | translate }}</p>
			</goeko-category>
		</ng-container>
	</section>
	<section class="section-form">
		<go-carousel
			(valueChangeButton)="addFormGroup($event.index)"
			[hiddenButtonNext]="isSummarySlide()"
			[selectedSlideIndex]="slideSelected"
		>
			<ng-container *ngFor="let element of formField; last as isLast">
				<section *goSlide class="content-form go-scroll">
					<!--FORM ACTORS-->
					<div class="form-wrapper" [formGroupName]="element.controlName">
						<div
							class="form-field form-field--center form-field-{{ field.type }}"
							*ngFor="let field of element.fields"
						>
							<!-- FIELD FORM -->

							<ng-container *ngIf="!field.hidden">
								<ng-container [ngSwitch]="field.type">
									<!-- INPUT boolean -->
									<ng-container *ngSwitchCase="'boolean'">
										<div class="field-form-checked">
											<label>{{ field.label | translate }}</label>
											<label class="switch">
												<input
													type="checkbox"
													[formControlName]="field.controlName"
													[value]="
														this.form.value[element.controlName][field.controlName]
															? 'YES'
															: 'NO'
													"
												/>
												<span class="slider round"></span>
											</label>
										</div>
									</ng-container>
									<!-- INPUT NUMBER -->
									<ng-container *ngSwitchCase="'number'">
										<go-input
											[textHelp]="field.textHelp"
											[formControlName]="field.controlName"
											type="number"
										>
											<p slot="label">{{ field.label | translate }}</p>
										</go-input>
									</ng-container>
									<!-- INPUT SELECT -->

									<ng-container *ngSwitchCase="'select'">
										<label for="{{ field.controlName }}">{{ field.label | translate }}</label>

										<ui-super-select
											[placeholder]="'SELECT_DATA_LABEL.defaultLabel' | translate"
											[formControlName]="field.controlName"
											[id]="field.controlName"
											[name]="field.controlName"
										>
											<super-option
												*ngFor="let option of dataSelect[field.controlName]"
												[value]="option.keyLang | translate"
											>
												{{ option.keyLang | translate }}
											</super-option>
										</ui-super-select>
									</ng-container>

									<!-- INPUT SELECT-MULTIPLE-->

									<ng-container *ngSwitchCase="'select-multiple'">
										<label for="{{ field.controlName }}">{{ field.label | translate }}</label>

										<ui-super-select
											[placeholder]="'SELECT_DATA_LABEL.defaultLabel' | translate"
											[multiple]="true"
											[formControlName]="field.controlName"
											[id]="field.controlName"
											[name]="field.controlName"
											[compareWith]="defaultSetSuperSelect"
										>
											<super-option
												*ngFor="let option of dataSelect[field.controlName]"
												[value]="option"
											>
												{{ option.keyLang | translate }}
											</super-option>
										</ui-super-select>
									</ng-container>

									<!-- Question card-->
									<ng-container *ngSwitchCase="'question'">
										<label for="{{ field.controlName }}">{{ field.label | translate }}</label>
										<select
											multiple
											[formControlName]="field.controlName"
											[id]="field.controlName"
											[name]="field.controlName"
										>
											<option value="">
												--{{ 'SELECT_DATA_LABEL.defaultLabel' | translate }}--
											</option>
											<option
												*ngFor="let option of dataSelect[field.controlName]"
												[value]="option.keyLang | translate"
											>
												{{ option.keyLang | translate }}
											</option>
										</select>
									</ng-container>

									<!-- BADGE TEXT -->

									<ng-container *ngSwitchCase="'badge-group'">
										<label for="{{ field.controlName }}">{{ field.label | translate }}</label>
										<p class="text-support">
											{{ 'SELECT_DATA_LABEL.defaultLabel' | translate }}
										</p>
										<go-badge-group
											[formControlName]="field.controlName"
											[id]="field.controlName"
											[name]="field.controlName"
											[compareWith]="defaultSetSuperSelect"
										>
											<go-badge
												*ngFor="let option of dataSelect[field.controlName]"
												[value]="option | translate"
												>{{ option.keyLang | translate }}</go-badge
											>
										</go-badge-group>
									</ng-container>

									<ng-container *ngSwitchDefault>
										<go-input [textHelp]="field.textHelp" [formControlName]="field.controlName">
											<p slot="label">{{ field.label | translate }}</p>
										</go-input>
									</ng-container>
								</ng-container>
							</ng-container>
						</div>
					</div>

					<!--SUMMARY-->
					<!-- 		<ng-template #summary >
						<goeko-sme-analysis-summary
							[formField]="formField"
							[element]="element"
							[form]="form"
							[index]=""
						></goeko-sme-analysis-summary>
					</ng-template> -->
				</section>
			</ng-container>
		</go-carousel>
	</section>
	<div class="form-actions">
		<button type="button" go-button appearance="white">{{ 'cancel' | translate }}</button>
		<div class="form-actions-submit">
			<!-- 			<button type="button" go-button appearance="white" *ngIf="isSummarySlide()" (click)="saveAnalysis()">
				{{ 'save' | translate }}
			</button> -->
			<button type="button" go-button appearance="white" (click)="gotToSummary()">
				{{ 'summary' | translate }}
			</button>
			<go-goeko-button class="button-submit" (click)="getResults()">
				<span class="goeko-go" btn-logo></span>
				Eco-solutions</go-goeko-button
			>
		</div>
	</div>
</div>
<ng-template #question let-field="field">
	<label for="{{ field.controlName }}">{{ field.label | translate }}</label>
	<select multiple [formControlName]="field.controlName" [id]="field.controlName" [name]="field.controlName">
		<option value="">--{{ 'SELECT_DATA_LABEL.defaultLabel' | translate }}--</option>
		<option *ngFor="let option of dataSelect[field.controlName]" [value]="option.title">
			{{ option.title }}
		</option>
	</select>
</ng-template>
