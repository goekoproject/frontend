<ng-container *ngIf="detailsEcosolution">
  <div class="detail-heading">
    <div class="detail-heading-main-info">
      <div>
        <go-badge [className]="detailsEcosolution.classification.mainCategory">
          {{
            'CATEGORIES.' + detailsEcosolution.classification.mainCategory
              | translate
          }}
        </go-badge>
        <h2 class="detail-heading--solution-name">
          {{ detailsEcosolution.solutionName }}
        </h2>
        <span class="detail-heading--name-company">{{
          detailsEcosolution.companyDetail.name
        }}</span>
      </div>

      <p class="detail-heading--description">
        {{ detailsEcosolution.description }}
      </p>
    </div>

    <img
      class="detail-logo"
      [src]="detailsEcosolution.companyDetail.logo"
      [alt]="'logo' + detailsEcosolution.companyDetail.name"
    />
  </div>
  <div class="detail-actions">
    <button go-button appearance="white" *ngIf="detailsEcosolution.certified">
      <i class="ti ti-file-download"></i>
      {{ 'certified' | translate }}
    </button>
  </div>

  <div class="ecosolution-content-details">
    <div class="detail-feature">
      <section class="details-section">
        <h3 class="details-section-title">
          {{ 'FORM_LABEL.basicInformation' | translate }}
        </h3>
        <div class="details-article">
          <div>
            <span class="details-article--label">
              {{ 'FORM_LABEL.countriesAvailable' | translate }}
            </span>
            <p class="details-article--data">
              {{ detailsEcosolution['countries'] | country }}
            </p>
          </div>
  
          <div>
            <span class="details-article--label">
              {{ 'FORM_LABEL.price' | translate }}
            </span>
            <p class="details-article--data">
              {{ detailsEcosolution['priceDescription'] || '-' }}
            </p>
          </div>
  
          <div>
            <span class="details-article--label">
              {{ 'FORM_LABEL.website' | translate }}</span
            >
            <p class="details-article--data">
              <a
                href="https://{{ detailsEcosolution.companyDetail.link }}"
                target="_blank"
                id="website_{{ detailsEcosolution.companyDetail.name }}"
              >
                {{ detailsEcosolution.companyDetail.link }}
              </a>
            </p>
          </div>
  
          @if (detailsEcosolution.paybackPeriodYears ) {
          <div>
            <span class="details-article--label">
              {{ 'FORM_LABEL.paybackPeriodYears' | translate }}</span
            >
            <p class="details-article--data">
              {{ detailsEcosolution.paybackPeriodYears }} {{'year' | translate}}
            </p>
          </div>
          }
  
          <div>
            <span class="details-article--label">
              {{ 'FORM_LABEL.guarantee' | translate }}
            </span>
            <div class="info-guarantee">
              @if (detailsEcosolution['guarantee']) {
              <p class="details-article--data">
                {{ detailsEcosolution['guaranteeInYears'] | number : '1.0-0' }}
                {{ 'years' | translate }}
              </p>
              } @else {
              <p class="details-article--data">
                {{ detailsEcosolution['guarantee'] | yesNo }}
              </p>
  
              }
            </div>
          </div>
        </div>
      </section>

      <section class="details-section">
        <h3 class="details-section-title">
          {{ 'FORM_LABEL.technicalDescription' | translate }}
        </h3>
   
        <div class="details-article">
          @for ( picture of detailsEcosolution['pictures']; track picture?.id) {
            <img class="details-article-picture" [src]="picture?.url" [alt]="picture?.name"/>
          }
            <p>
              {{ detailsEcosolution['detailedDescription'] || '-' }}
            </p>
        </div>
    
      </section>
      @if(detailsEcosolution.classification) {
        <section class="details-section">
          <div class="details-article details-article--products">
            <span>{{
              'CATEGORIES_LABEL.' +
                detailsEcosolution.classification.subCategory +
                '.label' | translate
            }}</span>
            <ng-container
              *ngFor="
                let option of dataSelect[
                  detailsEcosolution.classification.subCategory
                ]
              "
            >
              <go-badge
                *ngIf="
                  detailsEcosolution.classification.products.includes(option.id)
                "
                >{{ option.keyLang | translate }}</go-badge
              >
            </ng-container>
          </div>
        </section>
      }
    
  
      <section class="details-section">
        <h3 class="details-section-title">{{ 'ods_title' | translate }}</h3>
        <div class="details-article">
          <goeko-sdg-icons [readonly]="true"
            [selected]="detailsEcosolution.sustainableDevelopmentGoals"
          ></goeko-sdg-icons>
        </div>
      </section>
  
      <section class="details-section">
        <h3 class="details-section-title">
          {{ 'FORM_LABEL.advantages' | translate }}
        </h3>
        <div
          class="details-article details-article--advantages"
          *ngIf="detailsEcosolution?.improvement"
        >
          <go-percentage-card
            [label]="'FORM_LABEL.reductionPercentageCO2'"
            [percentage]="
              detailsEcosolution.improvement.reductionPercentage.to || 0
            "
          ></go-percentage-card>
          <go-percentage-card
            [label]="'FORM_LABEL.operationalCostReductionPercentage'"
            [percentage]="
              detailsEcosolution.improvement.operationalCostReductionPercentage
                .to || 0
            "
          ></go-percentage-card>
        </div>
      </section>
      

    </div>
    <goeko-lead-form [ecosolutionId]="detailsEcosolution.id"  [cleantechId]="detailsEcosolution.companyDetail.id" ></goeko-lead-form>

  </div>

  <div class="go-back">
    <button
      go-button
      appearance="white"
      (click)="goBack()"
    >
      <i class="ti ti-square-rounded-arrow-left"></i>
      {{ 'back' | translate }}
    </button>
  </div>
</ng-container>
