<div class="ecosolutions-form">
	<form [formGroup]="form" (submit)="idEcosolution ? editEcosolution() : saveEcosolution()">
		<fieldset class="ecosolutions-fieldset">
			<legend>{{ 'FORM_LABEL.basicInformation' | translate }}</legend>
			<go-input [formControlName]="'solutionName'">
				<span slot="label">{{ 'FORM_LABEL.solutionName' | translate }}</span>
			</go-input>

			<go-input [formControlName]="'solutionDescription'" type="textarea">
				<span slot="label">{{ 'FORM_LABEL.solutionDescription' | translate }}</span>
			</go-input>
		</fieldset>

		<fieldset class="ecosolutions-fieldset">
			<div>
				<legend>{{ 'FORM_LABEL.selectProducts' | translate }}</legend>
				<p *ngIf="mainCategory === 'hazardousProduct'" class="text-support">
					{{ 'TEXT_SUPPORT.selectProducts' | translate }}
				</p>
				<p *ngIf="mainCategory === 'waterConsumption'" class="text-support">
					{{ 'TEXT_SUPPORT.waterConsumption' | translate }}
				</p>
			</div>

			<div class="ecosolutions-subcategory">
				<goeko-select-subcategory-product
					[formControlName]="'subCategory'"
					*ngFor="let item of questionsCategories"
					[subCategory]="item"
				>
					<go-badge-group [formControlName]="'products'" [compareWith]="defaultSetProductsCategories">
						<go-badge *ngFor="let option of productsCategories" [value]="option.id">{{
							option.keyLang | translate
						}}</go-badge>
					</go-badge-group>
				</goeko-select-subcategory-product>
			</div>
		</fieldset>

		<fieldset class="ecosolutions-fieldset" *ngIf="mainCategory !== 'hazardousProduct'">
			<legend>{{ 'FORM_LABEL.advantagesEcosolutions' | translate }}</legend>

			<go-input [formControlName]="'reductionPercentage'" type="number">
				<span slot="label">{{ 'FORM_LABEL.reductionPercentage' | translate }}</span>
			</go-input>
			<go-input [formControlName]="'operationalCostReductionPercentage'" type="number">
				<span slot="label">{{ 'FORM_LABEL.operationalCostReductionPercentage' | translate }}</span>
			</go-input>
		</fieldset>

		<fieldset class="ecosolutions-fieldset" formArrayName="sustainableDevelopmentGoals" class="fieldset-ods">
			<legend>{{ 'FORM_LABEL.ecosolutions_sustainableDevelopmentGoals' | translate }}</legend>
			<label
				*ngFor="let codeControls of sustainableDevelopmentGoals.controls; let i = index"
				class="ecosolution-ods"
				[formGroupName]="i"
			>
				<i *ngIf="codeControls.value.checked" class="ti ti-circle-check ods-check"></i>

				<input type="checkbox" [id]="i" [formControlName]="'checked'" [value]="codeControls.value.checked" />
				<img
					class="ods-icon"
					[src]="'assets/icon-ods/' + currentLangCode + '-Goal-' + ods[i] + '.png'"
					[alt]="code"
				/>
				<!-- 				<span> {{ dataSelect['odsDescription'][i].keyLang | translate }}</span>
 -->
			</label>
		</fieldset>

		<fieldset class="ecosolutions-fieldset">
			<legend>{{ 'FORM_LABEL.furtherInformation' | translate }}</legend>

			<go-input [formControlName]="'price'" type="number">
				<span slot="label">{{ 'FORM_LABEL.price' | translate }}</span>
			</go-input>

			<div>
				<label for="deliverCountries">{{ 'FORM_LABEL.deliverCountries' | translate }}</label>

				<ui-super-select
					[placeholder]="'SELECT_DATA_LABEL.defaultLabel' | translate"
					[multiple]="true"
					[formControlName]="'deliverCountries'"
					id="deliverCountries"
					name="deliverCountries"
					[compareWith]="defaultSetDeliverCountries"
				>
					<super-option *ngFor="let option of dataSelect['countries']" [value]="option">
						{{ option.keyLang | translate }}
					</super-option>
				</ui-super-select>
			</div>

			<div>
				<label for="deliverCountries">{{ 'FORM_LABEL.paybackPeriodYears' | translate }}</label>
				<p class="text-support">{{ 'TEXT_SUPPORT.paybackPeriodYears' | translate }}</p>

				<ui-super-select
					[placeholder]="'SELECT_DATA_LABEL.defaultLabel' | translate"
					[formControlName]="'paybackPeriodYears'"
					id="paybackPeriodYears"
					name="paybackPeriodYears"
					[compareWith]="defaultSetPaybackPeriodYears"
				>
					<super-option *ngFor="let option of dataSelect['paybackPeriodYears']" [value]="option">
						{{ option.id }} {{ option.keyLang | translate }}
					</super-option>
				</ui-super-select>
			</div>

			<div class="field-form-checked">
				<label for="marketReady">{{ 'FORM_LABEL.marketReady' | translate }}</label>
				<label class="switch">
					<input type="checkbox" [formControlName]="'marketReady'" />
					<span class="slider round"></span>
				</label>
			</div>

			<div class="field-form-checked">
				<label for="guarantee">{{ 'FORM_LABEL.guarantee' | translate }}</label>
				<label class="switch">
					<input type="checkbox" [formControlName]="'guarantee'" />
					<span class="slider round"></span>
				</label>
			</div>

			<div class="field-form-upload">
				<div class="field-form-checked">
					<label for="certified">{{ 'FORM_LABEL.certified' | translate }}</label>
					<label class="switch">
						<input type="checkbox" [formControlName]="'certified'" />
						<span class="slider round"></span>
					</label>
				</div>

				<input type="file" (change)="fileChange($event)" [disabled]="!this.form?.value?.certified" />
			</div>

			<!-- 	<div class="field-form-checked">
				<label for="approved">{{ 'FORM_LABEL.approvedSwiss' | translate }}</label>
				<label class="switch">
					<input type="checkbox" [formControlName]="'approved'" />
					<span class="slider round"></span>
				</label>
			</div> -->
		</fieldset>

		<div class="actions-button">
			<button go-button appearance="white" type="button" (click)="goBack()">
				{{ 'Cancel' | translate }}
			</button>

			<button go-button type="submit">{{ 'Save' | translate }} Eco-solutions</button>
		</div>
	</form>
</div>
