<div class="bg-primary-gray">
  @defer (when form) {
    <form [formGroup]="form" class="m-auto w-full max-w-3xl rounded-sm p-8">
      <!--Select Products-->
      <goeko-ecosolutions-form-ecosolution-type
        class="section-form"
        [groupingForm]="groupingForm()"
        [ecosolutionsClassifications]="ecosolutionData()?.classifications"
        [parentForm]="form"
        [categoryCode]="categoryCode()"></goeko-ecosolutions-form-ecosolution-type>

      <goeko-ecosolutions-form-benefis
        class="section-form"
        [parentForm]="form"
        [categoryCode]="categoryCode()"></goeko-ecosolutions-form-benefis>

      <goeko-ecosolutions-form-details
        class="section-form"
        [ecosolutionDetails]="ecosolutionData()"
        [parentForm]="form"></goeko-ecosolutions-form-details>

      <ng-container *ngTemplateOutlet="imageUpload"></ng-container>
      <goeko-ecosolutions-form-country-available
        class="section-form"
        [parentForm]="form"
        [ecosolutionLocation]="ecosolutionData()?.locations"></goeko-ecosolutions-form-country-available>
      <ng-container *ngTemplateOutlet="sdg"></ng-container>
      <ng-container *ngTemplateOutlet="payback"></ng-container>
      <goeko-ecosolutions-form-warranty class="section-form" [parentForm]="form" [isReadOnly]="false"></goeko-ecosolutions-form-warranty>
      <goeko-ecosolutions-form-documents
        class="section-form"
        [ecosolutionCertificates]="ecosolutionData()?.documents"
        [parentForm]="form"
        [isReadOnly]="false"></goeko-ecosolutions-form-documents>
      <goeko-form-error-text [form]="form">
        {{ 'ERRORS_FORM.haveError' | translate }}
      </goeko-form-error-text>
      <div class="actions-button">
        <button go-button appearance="white" type="button" (click)="goToListEcosolution()">
          {{ 'back' | translate }}
        </button>

        <button go-button type="submit" (click)="id() ? editEcosolution() : saveEcosolution()">
          {{ 'saveYou' | translate }} Ã©co-solution
        </button>
      </div>
    </form>
  }
</div>

<ng-template #imageUpload>
  <goeko-input-file
    class="section-form"
    (fileChange)="uploadImgEcosolutions($event)"
    [filesUrl]="urlPicEcosolution || ''"
    [multiple]="true"
    [label]="'FORM_LABEL.titleSelectImgEcosolution' | translate"></goeko-input-file>
</ng-template>

<ng-template #sdg>
  <fieldset class="section-form" [formGroup]="form">
    <div class="legend--info">
      <legend>
        {{ 'FORM_LABEL.ecosolutions_sustainableDevelopmentGoals' | translate }}
      </legend>
      <p class="text-support">
        {{ 'TEXT_SUPPORT.ods' | translate }}
      </p>
    </div>
    <goeko-sdg-icons [formControlName]="'sustainableDevelopmentGoals'"></goeko-sdg-icons>
  </fieldset>
</ng-template>

<ng-template #payback>
  <fieldset class="section-form" [formGroup]="form">
    <legend>{{ 'FORM_LABEL.paybackPeriodYears' | translate }}</legend>

    <ui-super-select
      [placeholder]="'SELECT_DATA_LABEL.defaultLabel' | translate"
      [formControlName]="'paybackPeriodYears'"
      id="paybackPeriodYears"
      name="paybackPeriodYears"
      [compareWith]="defaultSetPaybackPeriodYears">
      <super-option *ngFor="let option of dataSelect['paybackPeriodYears']" [value]="option">
        {{ option.id }} {{ option.keyLang | translate }}
      </super-option>
    </ui-super-select>
  </fieldset>
</ng-template>
