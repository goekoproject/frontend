<fieldset class="ecosolutions-fieldset" [formGroup]="parentForm()">
  <legend>{{ 'FORM_LABEL.basicInformation' | translate }}</legend>
  <ng-container formArrayName="nameTranslations">
    @for (translation of nameTranslations().controls; track $index + '-name'; let i = $index) {
      <ng-container [formGroupName]="i">
        <div class="relative">
          <label> {{ 'FORM_LABEL.solutionName' | translate }}</label>

          <goeko-go-input
            [formControlName]="'label'"
            [class.hidden]="selectedFormLang() !== translation.value.lang && selectedFormArray() === 'nameTranslations'">
          </goeko-go-input>
        </div>
      </ng-container>
    }
  </ng-container>

  <ng-container formArrayName="descriptionTranslations">
    @if (showLanguageSwitcher()) {
      <label>{{ 'FORM_LABEL.solutionDescription' | translate }}</label>

      <goeko-language-switcher
        [langs]="langField()"
        (selectedChange)="selectedChangeForDetail($event, 'descriptionTranslations')"></goeko-language-switcher>
    }
    @for (translation of descriptionTranslations().controls; track $index + '-descriptionTranslations'; let i = $index) {
      {{ i }}
      {{ selectedFormLang() }} {{ translation.value.lang }}
      {{ selectedFormLang() !== translation.value.lang && selectedFormArray() === 'descriptionTranslations' }}
      <div
        #descriptionTranslations
        id="descriptionTranslations"
        [formGroupName]="i"
        class="relative"
        [ngClass]="{
          hidden: selectedFormLang() !== translation.value.lang && descriptionTranslations.id === 'descriptionTranslations',
        }">
        <goeko-go-textarea [formControlName]="'label'" [maxLength]="100"> </goeko-go-textarea>
      </div>
    }
  </ng-container>

  <ng-container formArrayName="detailedDescriptionTranslations">
    <div class="wrapper-textarea">
      <label for="detailedDescriptionTranslations">
        {{ 'FORM_LABEL.technicalDescription' | translate }}
      </label>
      @if (showLanguageSwitcher()) {
        <goeko-language-switcher
          [langs]="langField()"
          (selectedChange)="selectedChangeForDetail($event, 'detailedDescriptionTranslations')"></goeko-language-switcher>
      }
      <ngx-editor-menu [editor]="editor" [toolbar]="toolbar" class="block"> </ngx-editor-menu>
      @for (translation of detailedDescriptionTranslations().controls; track $index + 'detailedDescriptionTranslations'; let i = $index) {
        <div
          #detailedDescriptionTranslationstp
          id="detailedDescriptionTranslations"
          [formGroupName]="i"
          [ngClass]="{
            hidden:
              selectedFormLang() !== translation.value.lang && detailedDescriptionTranslationstp.id === 'detailedDescriptionTranslations',
          }">
          <ngx-editor
            [editor]="editor"
            [formControlName]="'label'"
            [class.editor-invalid]="
              translation.get('label')?.invalid && translation.get('label')?.touched && translation.get('label')?.dirty
            "
            [placeholder]="'FORM_LABEL.editorText' | translate"></ngx-editor>
          <goeko-form-error-text [form]="translation.get('label')">
            {{ 'ERRORS_FORM.required' | translate }}
          </goeko-form-error-text>
        </div>
      }
    </div>
  </ng-container>

  <ng-container formArrayName="priceDescriptionTranslations">
    <label>{{ 'FORM_LABEL.infoPrice' | translate }}</label>
    @if (showLanguageSwitcher()) {
      <goeko-language-switcher
        [langs]="langField()"
        (selectedChange)="selectedChangeForDetail($event, 'priceDescriptionTranslations')"></goeko-language-switcher>
    }
    @for (translation of priceDescriptionTranslations().controls; track $index + '-priceDescriptionTranslations'; let i = $index) {
      <div
        [formGroupName]="i"
        class="relative"
        [class.hidden]="selectedFormLang() !== translation.value.lang && selectedFormArray() === 'priceDescriptionTranslations'">
        <goeko-go-textarea id="priceDescriptionTranslations" [formControlName]="'label'" [maxLength]="100"> </goeko-go-textarea>
      </div>
    }
  </ng-container>

  <section>
    <a role="button" class="flex text-sm text-primary-default" (click)="activateTranslate()">{{ 'translate' | translate }}</a>
    <go-badge-group>
      @for (lang of languageAvailable(); track lang) {
        <go-badge [value]="lang" (click)="selectedChange(lang)">
          <span class="fi fi-{{ lang.iconFlag }}"></span>
          <span>{{ lang.title | translate }}</span>
        </go-badge>
      }
    </go-badge-group>
  </section>
</fieldset>
